<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <script src="./node_modules/vue/dist/vue.js" charset="utf-8"></script>
    <script src="./node_modules/vuex/dist/vuex.js" charset="utf-8"></script>
  </head>
  <body>
    <div id="app">
      <p>{{ count }}</p>
      <p>
        <button @click="increment">+</button>
        <button @click="decrement">-</button>
      </p>
    </div>

    <script type="text/javascript">
    // make sure to call Vue.use(Vuex) if using a module system
    const store = new Vuex.Store({
      state: {
        count: 0
      },
      mutations: {
        increment: state => state.count++,
        decrement: state => state.count--
      }
    })

    const app = new Vue({
      el: '#app',
      store,
      computed: Vuex.mapState({
        // count () {
          // return this.$store.state.count
        // }
        // 箭头函数可使代码更简练
       count: state => state.count,

       // 传字符串参数 'count' 等同于 `state => state.count`
      //  countAlias: 'count',

       // 为了能够使用 `this` 获取局部状态，必须使用常规函数
      //  countPlusLocalState (state) {
        //  return state.count + this.localCount
      //  }
      }),
      methods: {
        increment () {
          store.commit('increment')
        },
        decrement () {
          store.commit('decrement')
        }
      }
    })
    </script>
  </body>
</html>
